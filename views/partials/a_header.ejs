
<style>
.top-bar {
  background-color: #001c48;
  color: white;
  padding: 10px;
  text-align: center;
  font-size: 14px;
}

.top-bar a {
  color: #00aaff;
  text-decoration: none;
}

/* Navigation Bar */
.navbar {
  display: flex;
  position: relative;
  height: 50px;
  justify-content: center;
  align-items: center;
  padding: 8px 24px;
  background-color: #ffffff;
  border-bottom: 1px solid #ddd;
}

.navbar .logo {
  position: absolute;
  left: 24px;
  font-size: 20px;
  font-weight: bold;
  color: #066da5;
  margin: 0;
  padding: 0;
  line-height: 1.2;
  white-space: nowrap;     /* 한 줄 유지 */
  line-height: 1;          /* 줄 간격 축소 */
}

/* 로그인/로그아웃 버튼 영역 */
.navbar .auth-buttons {
  position: absolute;
  right: 24px;
  display: flex;
  gap: 10px;
  align-items: center;
}

.logo-text {
  white-space: nowrap;  /* 줄바꿈 금지 */
}

.navbar .menu {
  display: flex;
  gap: 20px;
}

.navbar .menu a {
  text-decoration: none;
  color: #333;
  font-size: 16px;
  position: relative;
}

.navbar .menu a:hover {
  background-color: #cae7bf;
  border-radius: 4px;
  transition: background-color 0.2s ease;
}



.auth-buttons .btn-signin {
  display: inline-block;
  padding: 8px 16px;
  background-color: white;
  border: 1px solid #066da5;
  color: #066da5;
  border-radius: 4px;
  font-size: 14px;
  text-decoration: none;
  font-weight: bold;
  transition: background-color 0.3s ease;
}

.auth-buttons .btn-signin:hover {
  background-color: #e6f3fb;
}

.auth-buttons .btn-get-started {
  padding: 4px 8px;
  background-color: #066da5;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 14px;
  font-weight: bold;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.auth-buttons .btn-get-started:hover {
  background-color: #055c8a;
}

  .username-blue {
    color: #00aaff;
    font-weight: bold;
  }

/* Dropdown menu */
.navbar .menu .dropdown {
  position: relative;
}

.navbar .menu .dropdown:hover .dropdown-content {
  display: block;
}

.navbar .menu .dropdown .dropdown-content {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  background-color: white;
  box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
  min-width: 160px;
  z-index: 1;
}

.navbar .menu .dropdown .dropdown-content a {
  color: #333;
  padding: 4px 10px;
  text-decoration: none;
  display: block;
}

.navbar .menu .dropdown .dropdown-content a:hover {
  background-color: #9cbcf0;
}

</style>

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title><%= typeof title !== 'undefined' ? title + ' - ARGUS US INC.' : 'ARGUS US INC.' %></title>
  <link rel="stylesheet" href="/style.css">
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
</head>
<body>

  <!-- Top Bar -->
  <div class="top-bar">
    2055 E. 51st Street, Vernon, CA 90058&nbsp;&nbsp;&nbsp;&nbsp;| <a href="#">Read More →</a>
  </div>

  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="logo">ARGUS US INC.</div>

    <% if (isAuthenticated) { %>
    <div class="menu">
      <a href="/admin/a_dashboard">Home</a>
      <div class="dropdown">
        <a href="#">Account</a>
          <div class="dropdown-content">
            <a href="/admin/account/petty_ledger">Petty ledger</a>
            <a href="#">PO</a>
            <a href="#">Pay</a>
          </div>
      </div>  
      <div class="dropdown">
        <a href="#">General</a>
          <div class="dropdown-content">
            <a href="/admin/general/board/board">Board</a>
            <a href="/admin/schedule/schedule_manager">Schedule</a>
            <a href="/admin/document/document_manager">doc. manager</a>
            <a href="/admin/document/document_list">doc. list</a>
            <a href="/admin/creditcard/creditcard_manager">card manager</a>
            <a href="/admin/general/monthlycd_list">Monthly Card Charge</a>
            <a href="/admin/creditcard/creditcard_list">card list</a>
            <a href="/admin/creditcard/creditcard_acclist">card acc list</a>
          </div>
      </div>
      <div class="dropdown">
        <a href="#">Import</a>
          <div class="dropdown-content">
            <a href="/admin/import">Vendor</a>
            <a href="/admin/import_po">PO</a>
            <a href="/admin/import_pay">Pay</a>
          </div>
      </div>
      <div class="dropdown">
        <a href="#">Domestic</a>
          <div class="dropdown-content">
            <a href="/admin/domestic">Domestic Vendor</a>
            <a href="/admin/domestic_invoice">Domestic Invoice</a>
            <a href="/admin/domestic_pay">Pay</a>
          </div>
      </div>
      <div class="dropdown">
        <a href="#">Mail</a>
          <div class="dropdown-content">
            <a href="/admin/mail/envelop_elist">Check Envelop</a>
            <a href="/admin/mail/envelop_glist">Pay Envelop</a>
            <a href="#">mail Sheet</a>
            <a href="#"></a>
          </div>
      </div>
      <div class="dropdown">
        <a href="#">Employees</a>
          <div class="dropdown-content">
            <a href="/admin/payroll/printdoc/printdoc">Print doc</a>
            <a href="/admin/payroll/cashreceipt/cashreceipt_sheet">Cash Sheet</a>
            <a href="/admin/payroll/payroll_tax">Payroll Tax</a>
            <a href="/admin/payroll/payroll_employees/employees">employees</a>
            <a href="/admin/employees/employees_sick">Employees Sick</a>
            <a href="/admin/employees/employees_data">Employees Data</a>
            <a href="/admin/payroll/cashreceipt/cashreceipt_list">Cash List</a>
            <a href="#">X</a>
          </div>
      </div>
      <div class="dropdown">
      <!-- <a href="/import_an">Anmiwha</a>
      <a href="/import_vendor">Vendor</a>
      <a href="#">Blog</a>
      <a href="#">Company</a>
      <a href="/import_an">Anmiwha</a>
      <a href="/import_vendor">Vendor</a> -->
      <div class="dropdown">
        <a href="#">Personal</a>
          <div class="dropdown-content">
            <a href="/photo_admin">photo</a>
            <a href="/music_admin">music</a>
            <a href="/movie_admin">video</a>
          </div>
      </div>  
    </div>
    <% } %>

    <div class="auth-buttons">
      <% if (isAuthenticated) { %>
        <span class="btn-welcome">
          Welcome,👤 <span class="username-blue"><%= typeof user !== 'undefined' ? user.username : 'User' %></span>! (<%= user.role %>)
        </span>
        <a href="/logout" class="btn-signin">Log out</a>
        <a href="/register" class="btn-signin">Register</a>
      <% } else { %>
        <a href="/login" class="btn-signin">Log in</a>
        <a href="/register" class="btn-signin">Register</a>
      <% } %>
    </div>
  </nav>

  <script>
    // ===== 자동 로그아웃 기능 ===== \\
    let timer, warningTimer;
  const inactivityLimit = 15 * 60 * 1000; // 15분
  const warningTime = 1 * 60 * 1000; // 1분 전 경고

  function resetTimers() {
    clearTimeout(timer);
    clearTimeout(warningTimer);

    // 14분 후 경고창 띄우기
    warningTimer = setTimeout(showWarning, inactivityLimit - warningTime);

    // 15분 후 자동 로그아웃
    timer = setTimeout(() => {
      alert('세션이 만료되어 로그아웃됩니다.');
      window.location.href = '/logout';
    }, inactivityLimit);
  }

  function showWarning() {
    const extend = confirm('곧 자동 로그아웃됩니다.\n세션을 연장하시겠습니까?');
    if (extend) {
      resetTimers(); // 사용자가 [연장] 선택 시 타이머 리셋
    }
  }

  // 페이지 로딩 및 사용자 활동 감지
  window.onload = resetTimers;
  document.onmousemove = resetTimers;
  document.onkeypress = resetTimers;
  </script>