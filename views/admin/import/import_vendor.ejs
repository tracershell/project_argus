
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #f5f7fa;
    color: #333;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  .top-section {
    flex: 0 0 20%;
    padding: 0;
    background-color: #f5f7fa;  /* ìƒë‹¨ ì˜ì—­ ë°°ê²½ìƒ‰ */
    overflow-y: auto;
    font-size: 12px;
  }

  .bottom-section {
    flex: 1 1 80%;
    padding: 0;
    overflow-y: auto;
    font-size: 12px;
  }


/*------------------------ */
  h2 {
    margin-bottom: 1rem;
    font-size: 20px;
    color: #333;
  }


  .table-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 12px;
    white-space: nowrap;
  }

  th, td {
border: 1px solid #ccc;
padding: 2px 1px;
font-size: 12px;
text-align: center;
vertical-align: middle; /* ì¶”ê°€ */
}

  th {
    background-color: #f0f8ff;
  }

  tr {
    height: 30px;
  }

  .form {
    width: 100%;
  }

  td form{                      /* í…Œì´ë¸” ì•ˆì— ìˆëŠ” POST ë²„íŠ¼ì˜ ì •í™•íˆ í…Œì´ë¸” ì¤‘ì•™ì— ë†“ì´ëŠ” ì„¤ì • */
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center; 
    align-items: center;
    height: 100%;
  }

  .form-row {
    display: flex;
    width: 100%;
    gap: 20px;
    margin-bottom: 15px;
  }



  .form input,
  .form textarea {
    padding: 3px;
    font-size: 11px;
    box-sizing: border-box;           /*  */
    height: 24px;                     /* ì…ë ¥ë€ ë†’ì´ */
    border-radius : 3px;              /* ì…ë ¥ë€ ëª¨ì„œë¦¬ */
    border: 1px solid #ccc;         /* ì…ë ¥ë€ ì„  */
  }


  .form-row.second {
display: flex;                        /* .for-row ìì²´ì— display: flex ë¡œ ì„ ì–¸ë˜ì–´ ìƒì† ë  ê²ƒ ê°™ì§€ë§Œ ë˜ì§€ ì•Šì•„ ì§€ì • */
width: 100%;
align-items: center;
gap: 0.5rem;
}


  button {
    padding: 3px 16px; 
    font-size: 11px;
    cursor: pointer;
    border: 1px solid #066da5;
    border-radius: 4px;
    display: inline-block;
    margin: auto;
    text-align: center; 
    vertical-align: middle;
  }

  .btn-delete { background-color: #f5f7fa; }
  .btn-edit { background-color: #f5f7fa; }
  .btn-pdf { background-color: #f5f7fa; }

  /* Filter ê¸€ì”¨ êµµê²Œ */
.filter-label {
font-weight: bold;
font-size: 13px;
}

/* ì½¤ë³´ë°•ìŠ¤ë¥¼ ì…ë ¥ì¹¸ì²˜ëŸ¼ + 3ë°° í¬ê²Œ ë³´ì´ê²Œ */
.filter-select {
height: 24px;                  /* ë³´í†µ 12px â†’ 36pxë¡œ ì•½ 3ë°° */
font-size: 12px;
padding: 3px 3px;
border: 1px solid #ccc;
border-radius: 4px;
background-color: #fff;
appearance: none;             /* ê¸°ë³¸ ë¸Œë¼ìš°ì € ìŠ¤íƒ€ì¼ ì œê±° */
width: 300px;                  /* ì½¤ë³´ë°•ìŠ¤ í¬ê¸° */   
-webkit-appearance: none;
-moz-appearance: none;
}

.table-wrapper {
max-height: 400px;               /* ìµœëŒ€ ë†’ì´: ì´ ì´ìƒì´ë©´ ìŠ¤í¬ë¡¤ (ë³´ì´ëŠ” í–‰ìˆ˜ë¥¼ ê²°ì •)*/
overflow-y: auto;
border: 1px solid #ccc;
}

/* í—¤ë” ê³ ì • */
.vendor-table thead th {
position: sticky;
top: 0;
background-color: #f0f8ff;       /* ë°°ê²½ìƒ‰ ì—†ìœ¼ë©´ ìŠ¤í¬ë¡¤ ì‹œ ê°€ë ¤ì§ */
z-index: 1;                        /* */
border-bottom: 1px solid #ccc;   /* í—¤ë” ì•„ë˜ ì„  */ 
}

/* í…Œì´ë¸” ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.vendor-table {
width: 100%;
border-collapse: collapse;
font-size: 12px;
}

.vendor-table th,
.vendor-table td {
padding: 6px 4px;
border: 1px solid #ccc;
text-align: center;
vertical-align: middle;
white-space: nowrap;
}

</style>
</head>
<body class="employee-page">

<!-- âœ… Vendor ì…ë ¥ ì˜ì—­ -->
<div class="top-section compact-form">
<h2>Import Vendor ì…ë ¥</h2>
<form method="POST" action="/admin/import/add" class="form" style="width: 100%;">

  <!-- âœ… ì¤„ 1: ë“±ë¡ì¼, Vendor Name, Deposit Rate -->
  <div class="form-row first">
    <input type="date" name="date" placeholder="ë“±ë¡ì¼" required style="flex: 1 1 5%;">
    <input type="text" name="v_name" placeholder="Vendor Name" required style="flex: 1 1 17%;">
    <input type="number" name="vd_rate" placeholder="Deposit Rate (%)" required style="flex: 0 0 100px; max-width:110px;"> 
    <input type="text" name="v_address1" placeholder="Address" style="flex: 1 1 15%;">
    <input type="text" name="v_address2" placeholder="city, state, zip" style="flex: 1 1 15%;">
    <input type="text" name="v_phone" placeholder="Phone" style="flex: 1 1 5.5%;">
    <input type="email" name="v_email" placeholder="Email" style="flex: 1 1 12%;">
    <textarea name="v_note" placeholder="Note" rows="2" style="flex: 1 1 30%; resize: vertical;"></textarea>
  </div>

  <!-- âœ… ì¤„ 2: ë²„íŠ¼ë“¤ -->
  <div class="form-row second" style="display: flex; justify-content: space-between; align-items: center;">
    <button type="reset">ğŸ§¹ ì´ˆê¸°í™”</button>
    <button type="submit">â• ë“±ë¡</button>
  </div>

</form>
</div>

<!-- âœ… Vendor ë¦¬ìŠ¤íŠ¸ -->
<div class="bottom-section">
<div class="table-header">
  <h2>Import Vendor List</h2>
  <div>
    <!-- ê¸°ì¡´ PDF ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ -->
    <a href="/admin/import/pdf">
      <button class="btn-pdf">ğŸ“„ PDF ì¶œë ¥</button>
    </a>
    <!-- âœ… ìƒˆë¡­ê²Œ ì¶”ê°€ë˜ëŠ” PDF ë¯¸ë¦¬ë³´ê¸° ë²„íŠ¼ -->
    <a href="/admin/import/pdfview">
      <button class="btn-pdf">ğŸ‘ï¸ PDF ë³´ê¸°</button>
    </a>
  </div>
</div>


<form method="GET" action="/admin/import" style="margin: 1rem 0;">
  <label class="filter-label">Vendor :
    <select name="filter_name" class="filter-select">
      <option value="">â€¹ì „ì²´â€º</option>
      <% names.forEach(n => { %>
        <option value="<%= n.v_name %>" <%= filter_name === n.v_name ? 'selected' : '' %>><%= n.v_name %></option>
      <% }) %>
    </select>
  </label>
  <button type="submit">ê²€ìƒ‰</button>
</form>

<!-- âœ… ìˆ˜ì •: table-wrapper ì•ˆì— table í¬í•¨ -->
<div class="table-wrapper">
<table class="vendor-table">
  <thead>
    <tr>
      <th>ë“±ë¡ì¼</th>
      <th>Vendor Name</th>
      <th>Deposit Rate</th>
      <th>Address</th>
      <th>Phone</th>
      <th>Email</th>
      <th>Note</th>
      <th>ìˆ˜ì •</th>
      <th>ì‚­ì œ</th>
    </tr>
  </thead>
  <tbody>
    <% vendors.forEach(v => { %>
      <tr>
        <td class="vendor-date" data-date="<%= v.date %>"></td>
        <td><%= v.v_name %></td>
        <td><%= v.vd_rate %> %</td>
        <td><%= v.v_address1 %> <%= v.v_address2 %></td>
        <td><%= v.v_phone %></td>
        <td><%= v.v_email %></td>
        <td><%= v.v_note %></td>
        <td>
          <form method="GET" action="/admin/import/edit/<%= v.id %>">
            <button class="btn-edit">âœï¸ ìˆ˜ì •</button>
          </form>
        </td>
        <td>
          <form method="POST" action="/admin/import/delete/<%= v.id %>" onsubmit="return confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
            <button class="btn-delete">ğŸ—‘ï¸ ì‚­ì œ</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>
</div>

</body>

<script>
// ëª¨ë“  input ìš”ì†Œì— ëŒ€í•´ Enter í‚¤ ì²˜ë¦¬
document.addEventListener('DOMContentLoaded', function () {
  const inputs = document.querySelectorAll('.form input, .form textarea');

  inputs.forEach((input, index) => {
    input.addEventListener('keydown', function (event) {
      if (event.key === 'Enter') {
        event.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë™ì‘ ë°©ì§€

        // ë‹¤ìŒ input ë˜ëŠ” textareaë¡œ í¬ì»¤ìŠ¤ ì´ë™
        const next = inputs[index + 1];
        if (next) {
          next.focus();
        }
      }
    });
  });
});

document.addEventListener('DOMContentLoaded', function () {
  const dateCells = document.querySelectorAll('.vendor-date');

  dateCells.forEach(cell => {
    const rawDate = new Date(cell.dataset.date); // ISO ë‚ ì§œ â†’ Date ê°ì²´
    if (!isNaN(rawDate)) {
      const mm = String(rawDate.getMonth() + 1).padStart(2, '0');
      const dd = String(rawDate.getDate()).padStart(2, '0');
      const yyyy = rawDate.getFullYear();
      const formatted = `${mm}/${dd}/${yyyy}`;
      cell.textContent = formatted;
    } else {
      cell.textContent = 'Invalid date';
    }
  });
});
</script>